<html>
<head>
	<title>Pong</title>
	<script>
	var fps=20;
	var pasoX;
	var pasoY;
	var posX;
	var posY;
	var barraX;
	var barraY;
	var puntuacion1=0;
	var puntuacion2=0;
	var arrayBolas= new Array(300);
	var r=2;
	var micirculo;
	var coordx;
	var coordy;
	var velx;
	var vely;
	class Bola{
		constructor(posX,posY,r,pasoX,pasoY){
			this.posX=posX;
			this.posY=posY;
			this.pasoX=pasoX;
			this.pasoY=pasoY;
			this.r=r;
			this.micirculo=document.createElementNS("http://www.w3.org/2000/svg","circle");
			this.micirculo.setAttribute("cx",this.posX);
			this.micirculo.setAttribute("cy",this.posY);
			this.micirculo.setAttribute("r",this.r);
			document.getElementById("miSVG").appendChild(this.micirculo);
		}
		
		mover(){
			this.posX += this.pasoX;
			this.posY+=this.pasoY;
			this.micirculo.setAttribute('cx', this.posX);
			this.micirculo.setAttribute('cy', this.posY);
		}
		choque(){
			if(this.posX <= 10+30){
				this.pasoX*=-1;
			}
			if(this.posX >= 1110-30){
				this.pasoX*=-1;
			}
			if(this.posY <=10+30){
				this.pasoY*=-1;
			}
			if(this.posY >=510-30){
				this.pasoY*=-1;
			}
		}
	}
	function inicio(){
		for(var i=0;i<300;i++){
			coordx = Math.floor((Math.random()*800)+40);
			coordy = Math.floor((Math.random()*400)+40);
			velx = Math.floor((Math.random()*20)+1);
			vely = Math.floor((Math.random()*20)+1);
			arrayBolas[i]=new Bola(coordx,coordy,10,velx,vely);
		}
		var intervalo=setInterval(movimiento,fps);
	}
	function movimiento(){
		for (var i=0;i<300;i++){
			arrayBolas[i].mover();
			arrayBolas[i].choque();
		}
	}
	
	function moverPieza(e){
	var keyCode = document.all ? e.which : e.keyCode;
		if (keyCode==38){
			if(barraY>=15){
				document.getElementById('barraI').setAttribute('y', (barraY-5));
			}
		}else if (keyCode==40){
			if(barraY<=510-110-5){
				document.getElementById('barraI').setAttribute('y', (barraY+5));
			}
		}
	}
	window.onkeydown = moverPieza;
	</script>
	<style>
	</style>
</head>
<body onload="inicio()"> 
<svg id="miSVG" width="1500" height="550">
	<rect id="caja" x="10" y="10" width="1100" height="500" style="stroke:red;stroke-width:5;fill:white;"/>
	<rect id="barraI" x="30" y="30" width="40" height="110" style="fill:red;"/>
</svg>
Puntuacion:<label id="punt1">0</label>-<label id="punt2">0</label>
</body>
</html>